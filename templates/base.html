<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}UL Packing{% endblock %}</title>
    <link rel="stylesheet" href="/static/app.css" />
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  </head>
  <body>
    <main class="container">{% block content %}{% endblock %}</main>
    <script>
      document.addEventListener("click", async (event) => {
        const button = event.target.closest("[data-copy-target]");
        if (!button) return;
        const targetId = button.getAttribute("data-copy-target");
        const target = targetId ? document.getElementById(targetId) : null;
        if (!target) return;
        const defaultLabel = button.getAttribute("data-copy-label-default") || "コピー";
        const successLabel = button.getAttribute("data-copy-label-success") || "コピー済み";
        const errorLabel = button.getAttribute("data-copy-label-error") || "コピー失敗";
        const text = target.textContent?.trim() || "";
        if (!text) return;
        try {
          await navigator.clipboard.writeText(text);
          button.textContent = successLabel;
        } catch {
          button.textContent = errorLabel;
        }
        window.setTimeout(() => {
          button.textContent = defaultLabel;
        }, 1200);
      });
    </script>
  </body>
</html>
